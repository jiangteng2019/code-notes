# Linux中mkpart 与fdisk命令在磁盘分区区别

 
`mkpart`（`parted` 工具的一部分）和 `fdisk` 都是用于磁盘分区的命令，但它们的设计目标和使用方式有所不同。以下是两者在功能、操作和应用场景上的主要区别：

---

### **1. 工具本身**
- **`mkpart`（`parted`）**：
  - 是 `parted` 工具的一部分，支持交互式和非交互式模式。
  - 支持 **GPT** 和 **MBR** 分区表格式，能够处理更大容量的磁盘（超过 2TB）。
  - 提供高级功能，比如调整分区大小、对齐分区、创建无文件系统分区等。

- **`fdisk`**：
  - 专注于传统的分区管理。
  - 主要用于 **MBR** 格式分区，支持 GPT 但功能相对有限。
  - 适合较小的磁盘（<2TB），因为 MBR 本身的限制。

---

### **2. 分区功能**
- **`mkpart`（`parted` 的命令）**：
  - 更灵活，可以直接指定起始和结束位置创建分区：
    ```bash
    parted /dev/sdX mkpart primary ext4 0% 50%
    ```
  - 提供 **扇区对齐** 的支持（默认对齐到最佳位置），适合 SSD 等设备。
  - 支持非文件系统的分区（如 `linux-swap` 或直接保留空分区）。
  - 可操作 GPT 分区表，适用于大于 2TB 的磁盘。

- **`fdisk`**：
  - 更传统且交互式，操作步骤需要通过键入多个命令完成，例如：
    ```bash
    fdisk /dev/sdX
    # 然后按 n（新建分区）、p（主分区）、输入起止扇区等。
    ```
  - 默认操作 MBR 分区表，如果用于 GPT，推荐配合 `gdisk` 工具。
  - 缺乏自动对齐功能，需要手动调整分区的起始位置以对齐（尤其是 SSD）。

---

### **3. 操作便捷性**
- **`mkpart`（`parted`）**：
  - 支持精确的分区起始和结束位置指定（如百分比或字节单位），方便脚本化或一次性完成。
  - 更适合现代存储场景，如大容量磁盘、混合分区表。

- **`fdisk`**：
  - 操作流程较为交互式，不适合自动化或脚本。
  - 对于简单任务和 MBR 分区的传统磁盘管理，使用直观。

---

### **4. 界面交互**
- **`mkpart`（`parted`）**：
  - 支持 CLI 和交互式两种模式，可在非交互模式下直接运行命令。
  - 输出的信息更易读，适合对磁盘结构进行快速查看或修改。

- **`fdisk`**：
  - 交互性较强，命令行模式需要逐步确认分区操作。
  - 信息较为简洁，不提供图形化提示。

---

### **总结对比表**

| 特性            | `mkpart`（`parted`）            | `fdisk`                    |
|-----------------|--------------------------------|----------------------------|
| 支持分区表类型    | GPT 和 MBR                     | MBR（GPT 支持有限）        |
| 磁盘容量支持      | >2TB                           | ≤2TB（原生 MBR 支持）       |
| 适合存储类型      | 现代大容量磁盘、SSD            | 传统磁盘                   |
| 界面和交互        | 支持自动化脚本和精确分区创建     | 交互式（适合手动操作）      |
| 文件系统支持      | 支持非文件系统分区             | 偏向文件系统相关分区        |
| 分区对齐          | 默认优化对齐                  | 需要手动调整               |
| 操作灵活性        | 精确（字节、扇区、百分比等）     | 较笨重（按步操作）          |

---

### **推荐使用场景**
1. **使用 `mkpart`（`parted`）：**
   - 需要创建 GPT 分区表或管理大容量磁盘。
   - 希望快速完成分区创建，或编写自动化脚本。
   - 需要分区对齐（如用于 SSD 或 RAID）。

2. **使用 `fdisk`：**
   - 管理较小容量磁盘，或者仅需要 MBR 分区表。
   - 偏好交互式操作，不依赖脚本化。
   - 在旧系统或工具链下（如嵌入式设备）使用。